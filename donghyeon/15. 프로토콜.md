# Git이 사용하는 프로토콜
Git이 사용하는 프로토콜은 Local, HTTP, SSH, Git 이다.

## Local 프로토콜
리모트 저장소가 같은 시스템의 다른 디렉토리에 있을 때 사용할 수 있는 가장 기본적인 프로토콜이다. 로컬 저장소를 사용하는 것 처럼 URL 자리에 디렉토리 경로를 직접 입력할 수도 있고 `file://`로 시작하는 URL을 입력할 수도 있다.  

디렉토리 경로를 직접 입력하면 해당 파일을 직접 복사하거나 하드 링크를 사용하지만 `file://`로 시작하는 URL을 입력하면 네트워크를 통해 데이터를 전송할 때 처럼 별도의 프로세스를 생성하여 처리한다. 이는 효율은 좀 떨어지지만 외부 Refs나 개체들이 포함된 저장소의 복사본을 깨끗하게 유지할 수 있다는 장점이 있다. 

### Local 프로토콜의 장단점
설정, 사용이 간단하다는 장점이 있지만 다양한 상황에서 접근할 수 있도록 디렉토리를 공유하는 것은 일반적으로 어렵다. 그리고 무엇보다 우발적인 사고를 방지할 수 있는 보호 장치가 없다는 것이 큰 단점이다.


## HTTP 프로토콜
1.6.6 이전의 멍청한 HTTP와 1.6.6 이후의 스마트 HTTP 프로토콜로 나뉜다.  

GIt 서버는 스마트 HTTP 요청에 응답하지 않으면 멍청한 HTTP 프로토콜을 시도한다. 하지만 보통은 둘 중 하나만 사용하고, 둘을 한번에 사용하는 경우는 드물다. 그래서 스마트 HTTP만 알아볼 것이다. 

스마트 HTTP 프로토콜은 SSH나 Git 프로토콜처럼 통신하지만 HTTP(HTTPS) 포트를 이용하고 다양한 HTTP 인증 방식을 사용한다는 점이 다르다. 

SSH는 키를 발급하고 관리해야하는 번거로움이 있지만 HTTP는 사용자 이름과 암호만으로 인증할 수 있기 때문에 편리하다.  

### HTTP 프로토콜의 장단점
간혹 HTTPS를 사용하도록 설정하는 것이 SSH로 설정하는 것보다 까다로운 서버가 있다는 것말고는 단점이 없다. 읽기와 쓰기에 하나의 URL만을 사용하고, 사용자에게 익숙한 인증 방식을 사용한다. 또한 HTTPS를 이용해 데이터를 암호화하거나 클라이언트에게 서명된 SSL 인증서를 요구하는 것도 가능하며 매우 보편적인 프로토콜이기 때문에 방화벽에 막히는 일은 드물다.  

## SSH 프로토콜 
Git의 대표 프로토콜이다. SSH를 이용하면 외부 도구 없이 Git 서버를 구축할 수 있고 대부분 서버는 SSH로 접근할 수 있도록 설정되어 있다.(설정 또한 쉽다.)  

SSH를 통해 Clone 할 때는 `ssh://`로 시작하는 URL을 사용한다. 
```shell
$ git clone ssh://[user@]server/project.git
# SCP 형태의 구문으로 줄여 쓸 수 도 있다.
$ git clone [user@]server:proejct.gi
```

사용자 계정을 생략할 수도 있는데 이 때는 현재 로그인한 사용자의 계정을 사용한다. 

### SSH 프로토콜의 장단점
단순 읽기 전용의 접근인 경우에도 익명으로 접근할 수 없다는 단점이 있다. 하지만 장점은 많은데 첫째, 설정이 쉽다는 장점이 있다. 둘째, 모든 데이터는 암호화되어 인증된 상태로 전송되기 때문에 보안에 안전하다. 마지막으로 HTTPS, Local 프로토콜과 마찬가지로 데이터를 가능한한 압축하기 때문에 효율적이다.

## Git 프로토콜
Git에 포함된 데몬을 사용하는 방식으로 9418 포트를 사용한다. Git 프로토콜은 인증 메커니즘이 없다.  

잘 쓰이지 않으므로 자세히 알아보지는 않는다.

### Git 프로토콜의 장단점
전송속도가 가장 빠르지만 인증 메커니즘이 없고 9418 포트를 열어야 하는 등 설정도 복잡하다. 

